<%-include('../../Partials/header.ejs') %>
<%-include('../../Partials/navbar.ejs') %>
<div class ="container">
    <hr>
    <h2> Categoria </h2>
    <a href="/admin/categories/new" class="btn btn-success">Criar nova Categoaria</a>
  
    <table class="table table-striped table-bordered">
        <thead>
        <tr>
          <th> ID </th>
          <th> TÍTULO </th>
          <th> SLUG </th>
          <th> ACÕES </th>
       </tr>
       </thead>
       <tbody>
       <%categories.forEach(category => {%>
            <tr>
                <th><%= category.id %></th>
                <th><%= category.title %> </th>
                <th><%= category.slung %></th>
                <th>
                    <!-- <a href="/amdin/categories/edit/<%=category.id%>" class="btn btn-warning" style="display: inline;">update</a> -->

                    <form  action="/admin/categories/edit/<%=category.id%>" style="display: inline;" onsubmit="confirmaUpdate(event, this)">
                        <input type="hidden" name="id" value="<%=category.id %>" >
                    <button class="btn btn-warning" >update</button>
                </form>
                    <form method="POST" action="/categories/delete" style="display: inline;" onsubmit="confirmaDelecao(event, this)">
                        <input type="hidden" name="id" value="<%=category.id %>" >
                    <button class="btn btn-danger">excluir</button>
                </form>
                </th>
            </tr>
           <% }); %>
        </tbody> 
    </table>
</div>
<%-include('../../Partials/footer.ejs') %>

<script>
    // função para confirma se que deletar ou não 
     function confirmaDelecao(event, form) {
        event.preventDefault();
       var decision = confirm("Voce deseja Deletar essa Categoria")
       if (decision) {
       form.submit();
       }
     };
     function confirmaUpdate(event, form) {
        event.preventDefault();
       var decision = confirm("Deseja editar essa categoria ?")
       if (decision) {
       form.submit();
       }
     };


</script>
